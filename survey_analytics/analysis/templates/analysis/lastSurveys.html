{% extends '../layout/base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/lastSurveys.css' %}">
{% endblock %}
{% block content %}
<main class="surveys-container">
    <h1 class="title">Last surveys</h1>
    <p class="subtitle">Recently modified</p>

    <div class="recent-surveys">
        {% for survey in recent_surveys %}
        <div class="survey-card">
            <div class="survey-info">
                <img src="{% static 'images/icons/documentIcon.svg' %}" alt="Document icon">
                <div class="survey-details">
                    <p class="survey-name">{{ survey.name }}</p>
                    <p class="survey-size">
                        {{ survey.total_size_mb|floatformat:1 }} mb
                    </p>
                </div>
            </div>
            <img src="{% static 'images/icons/optionsIcon.svg' %}" alt="Options icon" class="options-icon">
        </div>
        {% empty %}
            <p>No recent surveys available.</p>
        {% endfor %}
    </div>

    <h2 class="all-surveys-title">All surveys</h2>

    <div class="search-container">
        <input type="text" placeholder="ðŸ”Ž Search" class="search-input">
    </div>

    <table class="surveys-table">
        <thead>
            <tr>
                <th>File name</th>
                <th>Uploaded by</th>
                <th>Last modified</th>
                <th>Options</th>
            </tr>
        </thead>
        <tbody>
            {% for survey in all_surveys %}
            <tr>
                <td>
                    <div class="file-info">
                        <input type="checkbox" id="checkbox{{ forloop.counter }}">
                        <img src="{% static 'images/icons/documentIcon.svg' %}" alt="Document icon" class="options-icon">
                        <div>
                            <p class="survey-name">{{ survey.name }}</p>
                            <p class="survey-size">{{ survey.total_size_mb|floatformat:1 }} mb</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="user-info">
                        <img src="{% static 'images/icons/userIcon.svg' %}" alt="User avatar" class="user-avatar">
                        <div>
                            <p class="user-name">{{ survey.user.get_full_name }}</p>
                            <p class="user-email">{{ survey.user.email }}</p>
                        </div>
                    </div>
                </td>
                <td>
                    <p class="last-modified">
                        {% if survey.last_modified %}
                            {{ survey.last_modified|date:"F jS, Y" }}
                        {% else %}
                            Not modified
                        {% endif %}
                    </p>
                </td>
                <td>
                    <img src="{% static 'images/icons/optionsIcon.svg' %}" alt="Options icon" class="options-icon">
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No surveys found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="pagination">
        <button class="pagination-btn">1</button>
    </div>
</main>
{% endblock %}
